    @model MebelShop.Models.ProductVM.ProductVM
@{
    ViewData["Title"] = "Home Page";
}



<!-- section -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- section-title -->
            <div class="col-md-12">
                <div class="section-title">
                    <h2 class="title">Deals Of The Day</h2>
                    <div class="pull-right">
                        <div class="product-slick-dots-1 custom-dots"></div>
                    </div>
                </div>
            </div>
            <!-- /secti0n-title -->
            <!-- banner -->
            <div style="display:none" class="Username" id="@User.Identity.Name"> </div>
            <!-- /banner -->
            <!-- Product Slick -->
            <div class="col-md-9 col-sm-6 col-xs-6" style="margin-left:100px;">
                <div class="row">
                    <div id="product-slick-1" class="product-slick">
                        @foreach (var item in Model.Product.Where(p=>p.News==true).Take(6))
                        {<!-- Product Single -->
                            <div class="product product-single">
                                <div class="product-thumb">
                                    <div class="product-label">
                                        @if (item.News)
                                        {
                                            <span>New</span>
                                        }
                                        else
                                        {
                                            <span></span>
                                        }

                                    </div>
                                   
                                    <a href="/Home/Details?id=@item.Id" class="main-btn quick-view"><i class="fa fa-search-plus"></i>    Quick view</a> 
                                        <img src="~/images/@Model.Images.Where(p=>p.ProductId==item.Id).First().Name " alt="">
                                    
                                </div>
                                <div class="product-body">
                                    <h3 class="product-price"> @item.Price </h3>
                                    <div class="product-rating">
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o empty"></i>
                                    </div>
                                    <h2 class="product-name"><a href="#"> @item.Name</a></h2>
                                    <div class="product-btns">
                                        <button class="main-btn icon-btn">
                                            @if (Model.Favorites.Any(p => p.ProductId == item.Id && p.UserId==ViewBag.userId)  )
                                            {
                                                <i id="@item.Id" data-check="false" style="color:orangered" class="fa fa-heart"></i>

                                            }
                                            else
                                            {
                                                <i id="@item.Id" data-check="false" class="fa fa-heart"></i>
                                            }

                                        </button>
                                        <button class="main-btn icon-btn"><i class="fa fa-exchange"></i></button>
                                        <button class="primary-btn add-to-cart"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Product Single -->
                        }




                    </div>
                </div>
            </div>
            <!-- /Product Slick -->
        </div>
        <!-- /row -->
       
    </div>
    <!-- /container -->
</div>
<!-- /section -->
<!-- section -->
<div class="section section-grey">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- banner -->
            <div class="col-md-8">
                @{var product8 = Model.Product.Where(p => p.Price > 3000).First();
                    var product4 = Model.Product.OrderBy(p=>p.Id).First();
                    var product3 = Model.Product.OrderByDescending(p => p.Id).First();}
                <div class="banner banner-1">
                    <img src="~/images/@Model.Images.Where(p=>p.ProductId==product8.Id).First().Name" alt="">
                    <div class="banner-caption text-center">
                        <h1 class="primary-color">@product8.Name<br><span class="white-color font-weak">@product8.Category.Name</span></h1>
                        <a href="/Home/Details?id=@product8.Id" class="primary-btn">Shop Now</a>
                    </div>
                </div>
            </div>
            <!-- /banner -->
            <!-- banner -->
            <div class="col-md-4 col-sm-6">
                <a class="banner banner-1" href="#">
                    <img src="~/images//@Model.Images.Where(p=>p.ProductId==product4.Id).First().Name" alt="">
                    <div class="banner-caption text-center">
                        <h2 class="white-color"> @product4.Category.Name</h2>
                    </div>
                </a>
            </div>
            <!-- /banner -->
            <!-- banner -->
            <div class="col-md-4 col-sm-6">
                <a class="banner banner-1" href="#">
                    <img src="~/images/@Model.Images.Where(p=>p.ProductId==product3.Id).First().Name" alt="">
                    <div class="banner-caption text-center">
                        <h2 class="white-color">@product3.Category.Name</h2>
                    </div>
                </a>
            </div>
            <!-- /banner -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /section -->
<!-- section -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- section title -->
            <div class="col-md-12">
                <div class="section-title">
                    <h2 class="title">Latest Products</h2>
                </div>
            </div>
            <!-- section title -->
            @foreach (var item in Model.Product.Take(4))
            {
                <!-- Product Single -->
                <div class="col-md-3 col-sm-6 col-xs-6">
                    <div class="product product-single">
                        <div class="product-thumb">
                            <a  href="/Home/Details?id=@item.Id" class="main-btn quick-view"><i class="fa fa-search-plus"></i> Quick view</a>
                            <img src="~/images/@Model.Images.Where(p=>p.ProductId==item.Id).First().Name" alt="">
                        </div>
                        <div class="product-body">
                            <h3 class="product-price">@item.Price</h3>
                            <div class="product-rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o empty"></i>
                            </div>
                            <h2 class="product-name"><a href="#">@item.Name</a></h2>
                            <div class="product-btns">
                                <button class="main-btn icon-btn">
                                    @if (Model.Favorites.Any(p => p.ProductId == item.Id && p.UserId==ViewBag.userId)  )
                                    {
                                        <i id="@item.Id" data-check="false" style="color:orangered" class="fa fa-heart"></i>

                                    }
                                    else
                                    {
                                        <i id="@item.Id" data-check="false" class="fa fa-heart"></i>
                                    }


                                </button>
                                <button class="main-btn icon-btn"><i class="fa fa-exchange"></i></button>
                                <button class="primary-btn add-to-cart"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /Product Single -->
            }
            </div>
        </div>
        <!-- /row -->
        <!-- row -->
        <div class="row">
            <!-- banner --><div class="col-md-12">
    <div class="section-title">
        <h2 class="title"> Products</h2>
    </div>
    <div class="col-md-3 col-sm-6 col-xs-6">
        <div class="banner banner-2">
            <img src="~/images/Product/image1.jpg" style="height:350px;" alt="">
            <div class="banner-caption">
                <h2 class="white-color">NEW<br>COLLECTION</h2>
                <button class="primary-btn">Shop Now</button>
            </div>
        </div>
    </div>
    <!-- /banner -->
    @foreach (var item in Model.Product.Take(6))
    {
        <!-- Product Single -->
        <div class="col-md-3 col-sm-6 col-xs-6">
            <div class="product product-single">
                <div class="product-thumb">
                     
                    <a href="/Home/Details?id=@item.Id" class="main-btn quick-view"><i class="fa fa-search-plus"></i> Quick view</a>
                    <img src="~/images/@Model.Images.Where(p=>p.ProductId==item.Id).First().Name" alt="">
                </div>
                <div class="product-body">
                    <h3 class="product-price">@item.Price </h3>
                    <div class="product-rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o empty"></i>
                    </div>
                    <h2 class="product-name"><a href="#"> @item.Name</a></h2>
                    <div class="product-btns">
                        <button class="main-btn icon-btn">
                            @if (Model.Favorites.Any(p => p.ProductId == item.Id && p.UserId == ViewBag.userId) )
                            {
                                <i id="@item.Id" data-check="false" style="color:orangered" class="fa fa-heart"></i>

                            }
                            else
                            {
                                <i id="@item.Id" data-check="false" class="fa fa-heart"></i>

                            }
                        </button>
                        <button class="main-btn icon-btn"><i class="fa fa-exchange"></i></button>
                        <button class="primary-btn add-to-cart"><i class="fa fa-shopping-cart"></i> Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Product Single -->
    }

</div>
        <!-- /row -->
        
    </div>
    <!-- /container -->
</div>
@section scripts{
<script>    
    $(document).on("click", ".fa-heart", function (e) {
        var test = $(this).attr("id");
        var username = $(".Username").attr("id");
        console.log(test, username);
        if ($(this).attr("data-check") == "false") {
            $(this).attr("data-check", "true")
            $(this).css("color", "orangered");
            $.ajax({
                url: "/Home/AddFovarite",
                data: { id: test, email: username },
                success: function (res) { 
                }
            })
        } else if ($(this).attr("data-check") == "true") {
            $(this).attr("data-check", "false")
            $(this).css("color", "black");
            $.ajax({
                url: "/Home/RemoveFovarite",
                data: { id: test, email: username },
                success: function (res) {
                }
            })
        }

       
    });
    </script>
} 